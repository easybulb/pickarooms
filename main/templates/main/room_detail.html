{% extends 'base.html' %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/room_detail.css' %}">
{% endblock %}

{% block title %}{{ room.name }} - Room Details{% endblock %}

{% block content %}
<!-- Hero Section -->
{% if room.image %}
    <section class="room-hero" style="background-image: url('{{ room.image.url }}');">
{% else %}
    <section class="room-hero" style="background-color: #555;"> <!-- Default if no image -->
{% endif %}
    <div class="room-overlay"></div>
    <div class="room-text">
        <h1>{{ room.name }}</h1>
        {% if guest %}
            <p>Welcome, {{ guest.full_name }}</p>
        {% endif %}
    </div>
</section>

<!-- Room Details -->
<section class="room-container">
    <div class="room-info">
        <h2>🔑 House and Room Access PIN</h2>
        {% if room.access_pin %}
        <p class="pin-code">{{ room.access_pin }}</p>
            {% else %}
                <p>No PIN assigned yet. Contact us for your access PIN.</p>
            {% endif %}

        <h2>🛏️ Room Details</h2>
        <p>{{ room.description }}</p>

        {% if guest %}
        <h2>📅 Your Stay</h2>
        <p><strong>Reservation Number:</strong> {{ guest.reservation_number }}</p>
        <p><strong>Check-In:</strong> {{ guest.check_in_date }} (From 2 PM)</p>
        <p><strong>Check-Out:</strong> {{ guest.check_out_date }} (Before 11 AM)</p>
        <p class="expiration"><strong>Access Expires:</strong> {{ expiration_message }}</p>

        {% else %}
        <p class="no-guest">❌ No guest assigned to this room. Contact admin for assistance.</p>
        {% endif %}
    </div>

    <!-- Room Video Instructions -->
    <div class="room-video">
        <h2>🎥 Room Video Guide</h2>
        <iframe width="100%" height="400"
                src="{{ room.video_url }}"
                title="Room Video Instructions"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
        </iframe>
    </div>

    <!-- Additional Resources -->
    <div class="room-resources">
        <h2>📄 Room Instructions</h2>
        <p><a href="/static/instructions/room_{{ room.id }}.pdf" download>📥 Download Room Instructions (PDF)</a></p>
    </div>
</section>

{% endblock %}
